#!/bin/bash

###############################################################################
# Houseping 애플리케이션 재시작 스크립트
###############################################################################

# 스크립트 디렉토리 경로
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# 설정
APP_NAME="houseping"

###############################################################################
# 메인 실행
###############################################################################

echo "=========================================="
echo "  Houseping 재시작 스크립트"
echo "=========================================="
echo ""

# 종료
echo "1️⃣  애플리케이션 종료"
echo "------------------------------------------"
"$SCRIPT_DIR/stop.sh"

if [ $? -ne 0 ]; then
    echo ""
    echo "❌ 종료 중 오류 발생"
    exit 1
fi

echo ""
echo "2️⃣  애플리케이션 시작"
echo "------------------------------------------"

# 잠시 대기
sleep 2

# 시작
"$SCRIPT_DIR/start.sh"

if [ $? -ne 0 ]; then
    echo ""
    echo "❌ 시작 중 오류 발생"
    exit 1
fi

echo ""
echo "=========================================="
echo "✅ 재시작 완료"
echo "=========================================="
